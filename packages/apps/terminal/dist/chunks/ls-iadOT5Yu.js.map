{"version":3,"file":"ls-iadOT5Yu.js","sources":["../../src/core/commands/ls.ts"],"sourcesContent":["import { VirtualFolder } from \"@prozilla-os/core\";\nimport { formatError } from \"../_utils/terminal.utils\";\nimport { Command, ExecuteParams } from \"../command\";\nimport { ANSI } from \"@prozilla-os/shared\";\n\nexport const ls = new Command()\n\t.setManual({\n\t\tpurpose: \"List directory contents\",\n\t\tusage: \"ls [options] [files]\",\n\t\tdescription: \"List information about directories or files (the current directory by default).\",\n\t})\n\t.setExecute(function(this: Command, args, params) {\n\t\tconst { currentDirectory } = params as ExecuteParams;\n\t\tlet directory = currentDirectory;\n\t\n\t\tif (args != null && args.length > 0) {\n\t\t\tdirectory = currentDirectory.navigate((args)[0]) as VirtualFolder;\n\t\t}\n\t\n\t\tif (!directory)\n\t\t\treturn formatError(this.name, `Cannot access '${(args as string[])[0]}': No such file or directory`);\n\t\n\t\tconst folderNames = directory.subFolders.map((folder) => `${ANSI.fg.blue}${folder.id}${ANSI.reset}`);\n\t\tconst fileNames = directory.files.map((file) => file.id);\n\t\n\t\tconst contents = folderNames.concat(fileNames);\n\t\n\t\tif (contents.length === 0)\n\t\t\treturn { blank: true };\n\t\n\t\treturn contents.sort().join(\"  \");\n\t});"],"names":["ls","Command","args","params","currentDirectory","directory","formatError","folderNames","folder","ANSI","fileNames","file","contents"],"mappings":";;;AAKO,MAAMA,IAAK,IAAIC,EAAQ,EAC5B,UAAU;AAAA,EACV,SAAS;AAAA,EACT,OAAO;AAAA,EACP,aAAa;AACd,CAAC,EACA,WAAW,SAAwBC,GAAMC,GAAQ;AAC3C,QAAA,EAAE,kBAAAC,EAAqB,IAAAD;AAC7B,MAAIE,IAAYD;AAMhB,MAJIF,KAAQ,QAAQA,EAAK,SAAS,MACjCG,IAAYD,EAAiB,SAAUF,EAAM,CAAC,CAAC,IAG5C,CAACG;AACJ,WAAOC,EAAY,KAAK,MAAM,kBAAmBJ,EAAkB,CAAC,CAAC,8BAA8B;AAEpG,QAAMK,IAAcF,EAAU,WAAW,IAAI,CAACG,MAAW,GAAGC,EAAK,GAAG,IAAI,GAAGD,EAAO,EAAE,GAAGC,EAAK,KAAK,EAAE,GAC7FC,IAAYL,EAAU,MAAM,IAAI,CAACM,MAASA,EAAK,EAAE,GAEjDC,IAAWL,EAAY,OAAOG,CAAS;AAE7C,SAAIE,EAAS,WAAW,IAChB,EAAE,OAAO,OAEVA,EAAS,KAAA,EAAO,KAAK,IAAI;AACjC,CAAC;"}