{"version":3,"file":"cat-DGEfhJuG.js","sources":["../../src/core/commands/cat.ts"],"sourcesContent":["import { VirtualFile } from \"@prozilla-os/core\";\nimport { formatError } from \"../_utils/terminal.utils\";\nimport { Command, ExecuteParams } from \"../command\";\n\nexport const cat = new Command()\n\t.setRequireArgs(true)\n\t.setManual({\n\t\tpurpose: \"Concetenate files and display on the terminal screen\",\n\t\tusage: \"cat [options] [files]\",\n\t\tdescription: \"Concetenate files to standard output.\",\n\t})\n\t.setExecute(function(this: Command, args, params) {\n\t\tconst { currentDirectory, options } = params as ExecuteParams;\n\t\tconst fileId = (args as string[])[0];\n\t\tconst { name, extension } = VirtualFile.splitId(fileId);\n\t\tconst file = currentDirectory.findFile(name, extension);\n\n\t\tif (!file)\n\t\t\treturn formatError(this.name, `${fileId}: No such file`);\n\n\t\tif (file.content) {\n\t\t\tif (!options?.includes(\"e\")) {\n\t\t\t\treturn file.content;\n\t\t\t} else {\n\t\t\t\t// Append \"$\" at the end of every line\n\t\t\t\treturn file.content.split(\"\\n\").join(\"$\\n\") + \"$\";\n\t\t\t}\n\t\t} else if (file.source) {\n\t\t\treturn `Src: ${file.source}`;\n\t\t} else {\n\t\t\treturn { blank: true };\n\t\t}\n\t});"],"names":["cat","Command","args","params","currentDirectory","options","fileId","name","extension","VirtualFile","file","formatError"],"mappings":";;;AAIO,MAAMA,IAAM,IAAIC,IACrB,eAAe,EAAI,EACnB,UAAU;AAAA,EACV,SAAS;AAAA,EACT,OAAO;AAAA,EACP,aAAa;AACd,CAAC,EACA,WAAW,SAAwBC,GAAMC,GAAQ;AAC3C,QAAA,EAAE,kBAAAC,GAAkB,SAAAC,EAAY,IAAAF,GAChCG,IAAUJ,EAAkB,CAAC,GAC7B,EAAE,MAAAK,GAAM,WAAAC,EAAA,IAAcC,EAAY,QAAQH,CAAM,GAChDI,IAAON,EAAiB,SAASG,GAAMC,CAAS;AAEtD,SAAKE,IAGDA,EAAK,UACHL,KAAA,QAAAA,EAAS,SAAS,OAIfK,EAAK,QAAQ,MAAM;AAAA,CAAI,EAAE,KAAK;AAAA,CAAK,IAAI,MAHvCA,EAAK,UAKHA,EAAK,SACR,QAAQA,EAAK,MAAM,KAEnB,EAAE,OAAO,OAZTC,EAAY,KAAK,MAAM,GAAGL,CAAM,gBAAgB;AAczD,CAAC;"}