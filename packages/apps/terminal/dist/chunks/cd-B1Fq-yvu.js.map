{"version":3,"file":"cd-B1Fq-yvu.js","sources":["../../src/core/commands/cd.ts"],"sourcesContent":["import { VirtualFile, VirtualFolder } from \"@prozilla-os/core\";\nimport { formatError } from \"../_utils/terminal.utils\";\nimport { Command, ExecuteParams } from \"../command\";\n\nexport const cd = new Command()\n\t.setManual({\n\t\tpurpose: \"Change the current directory\",\n\t\tusage: \"cd [PATH]\",\n\t\tdescription: \"Change working directory to given path (the home directory by default).\",\n\t})\n\t.setExecute(function(this: Command, args, params) {\n\t\tconst { currentDirectory, setCurrentDirectory } = params as ExecuteParams;\n\t\tconst path = (args as string[])[0] ?? \"~\";\n\t\tlet destination = currentDirectory.navigate(path);\n\t\n\t\tif (!destination)\n\t\t\treturn formatError(this.name, `${(args as string[])[0]}: No such file or directory`);\n\n\t\tif (destination instanceof VirtualFile)\n\t\t\tdestination = destination.parent as VirtualFolder;\n\t\n\t\tsetCurrentDirectory?.(destination);\n\t\treturn { blank: true };\n\t});"],"names":["cd","Command","args","params","currentDirectory","setCurrentDirectory","path","destination","VirtualFile","formatError"],"mappings":";;;AAIO,MAAMA,IAAK,IAAIC,EAAQ,EAC5B,UAAU;AAAA,EACV,SAAS;AAAA,EACT,OAAO;AAAA,EACP,aAAa;AACd,CAAC,EACA,WAAW,SAAwBC,GAAMC,GAAQ;AAC3C,QAAA,EAAE,kBAAAC,GAAkB,qBAAAC,EAAwB,IAAAF,GAC5CG,IAAQJ,EAAkB,CAAC,KAAK;AAClC,MAAAK,IAAcH,EAAiB,SAASE,CAAI;AAEhD,SAAKC,KAGDA,aAAuBC,MAC1BD,IAAcA,EAAY,SAE3BF,KAAA,QAAAA,EAAsBE,IACf,EAAE,OAAO,QANRE,EAAY,KAAK,MAAM,GAAIP,EAAkB,CAAC,CAAC,6BAA6B;AAOrF,CAAC;"}