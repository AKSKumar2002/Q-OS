{"version":3,"file":"cowsay-EPDcTSkP.js","sources":["../../src/core/commands/cowsay.ts"],"sourcesContent":["import { MAX_WIDTH } from \"../../constants/terminal.const\";\nimport { Command, ExecuteParams } from \"../command\";\n\nconst COW = `\n        \\\\   ^__^\n         \\\\  (oo)\\\\_______\n            (__)\\\\       )\\\\/\\\\\n                ||----w |\n                ||     ||`;\n\nexport const cowsay = new Command()\n\t.setRequireArgs(true)\n\t.setManual({\n\t\tpurpose: \"Show a cow saying something\",\n\t\tusage: \"cowsay text\",\n\t\tdescription: \"Show ASCII art of a cow saying something.\",\n\t})\n\t.setExecute(function(_args, params) {\n\t\tconst { rawInputValue } = params as ExecuteParams;\n\n\t\t// Separate input value into lines\n\t\tconst segments = rawInputValue?.split(\" \");\n\t\tconst lines: string[] = [];\n\t\tlet currentLine = \"\";\n\t\tlet maxLineWidth = 0;\n\n\t\tconst addLine = (line: string) => {\n\t\t\tline = line.trimEnd();\n\t\t\tlines.push(line);\n\t\t\tif (line.length > maxLineWidth)\n\t\t\t\tmaxLineWidth = line.length;\n\t\t};\n\n\t\tconst nextLine = (word?: string) => {\n\t\t\taddLine(currentLine);\n\n\t\t\tif (word) {\n\t\t\t\tcurrentLine = word + \" \";\n\t\t\t} else {\n\t\t\t\tcurrentLine = \"\";\n\t\t\t}\n\t\t};\n\n\t\tsegments?.forEach((segment) => {\n\t\t\t// Add empty spaces preceding lines\n\t\t\tif (segment === \"\") {\n\t\t\t\tcurrentLine += \" \";\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst words = segment.split(\"\\n\");\n\t\t\tfor (let i = 0; i < words.length; i++) {\n\t\t\t\tconst word = words[i];\n\t\t\t\t\n\t\t\t\t// Handle next lines\n\t\t\t\tif (i > 0)\n\t\t\t\t\tnextLine();\n\n\t\t\t\t// Fit word on current line\n\t\t\t\tif ((currentLine + word).length <= MAX_WIDTH) {\n\t\t\t\t\tcurrentLine += word + \" \";\n\t\t\t\t} else if (word.length > MAX_WIDTH) {\n\t\t\t\t\tconst remainingSpaces = MAX_WIDTH - currentLine.length;\n\n\t\t\t\t\tif (remainingSpaces >= 2) {\n\t\t\t\t\t\taddLine(currentLine + word.substring(0, remainingSpaces - 1) + \"-\");\n\t\t\t\t\t\tcurrentLine = word.substring(remainingSpaces - 1) + \" \";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnextLine(word);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnextLine(word);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (currentLine.length > 0)\n\t\t\taddLine(currentLine);\n\n\t\t// Turn lines into speech bubble\n\t\tconst speechBubble = [` ${\"_\".repeat(maxLineWidth + 2)} `];\n\n\t\tfor (let i = 0; i < lines.length; i++) {\n\t\t\tlet line = lines[i];\n\t\t\tconst missingSpaces = maxLineWidth - line.length;\n\n\t\t\tif (missingSpaces > 0)\n\t\t\t\tline += \" \".repeat(missingSpaces);\n\n\t\t\tif (lines.length > 1) {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tline = `/ ${line} \\\\`;\n\t\t\t\t} else if (i === lines.length - 1) {\n\t\t\t\t\tline = `\\\\ ${line} /`;\n\t\t\t\t} else {\n\t\t\t\t\tline = `| ${line} |`;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tline = `< ${line} >`;\n\t\t\t}\n\n\t\t\tspeechBubble.push(line);\n\t\t}\n\n\t\tspeechBubble.push(` ${\"-\".repeat(maxLineWidth + 2)} `);\n\n\t\treturn speechBubble.join(\"\\n\") + COW;\n\t});"],"names":["COW","cowsay","Command","_args","params","rawInputValue","segments","lines","currentLine","maxLineWidth","addLine","line","nextLine","word","segment","words","i","MAX_WIDTH","remainingSpaces","speechBubble","missingSpaces"],"mappings":";;AAGA,MAAMA,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA,4BAOCC,IAAS,IAAIC,IACxB,eAAe,EAAI,EACnB,UAAU;AAAA,EACV,SAAS;AAAA,EACT,OAAO;AAAA,EACP,aAAa;AACd,CAAC,EACA,WAAW,SAASC,GAAOC,GAAQ;AAC7B,QAAA,EAAE,eAAAC,EAAkB,IAAAD,GAGpBE,IAAWD,KAAA,gBAAAA,EAAe,MAAM,MAChCE,IAAkB,CAAA;AACxB,MAAIC,IAAc,IACdC,IAAe;AAEb,QAAAC,IAAU,CAACC,MAAiB;AACjC,IAAAA,IAAOA,EAAK,WACZJ,EAAM,KAAKI,CAAI,GACXA,EAAK,SAASF,MACjBA,IAAeE,EAAK;AAAA,EAAA,GAGhBC,IAAW,CAACC,MAAkB;AACnC,IAAAH,EAAQF,CAAW,GAEfK,IACHL,IAAcK,IAAO,MAEPL,IAAA;AAAA,EACf;AAGS,EAAAF,KAAA,QAAAA,EAAA,QAAQ,CAACQ,MAAY;AAE9B,QAAIA,MAAY,IAAI;AACJ,MAAAN,KAAA;AACf;AAAA,IACD;AAEM,UAAAO,IAAQD,EAAQ,MAAM;AAAA,CAAI;AAChC,aAASE,IAAI,GAAGA,IAAID,EAAM,QAAQC,KAAK;AAChC,YAAAH,IAAOE,EAAMC,CAAC;AAOf,UAJDA,IAAI,KACEJ,MAGLJ,IAAcK,GAAM,UAAUI;AAClC,QAAAT,KAAeK,IAAO;AAAA,eACZA,EAAK,SAASI,GAAW;AAC7B,cAAAC,IAAkBD,IAAYT,EAAY;AAEhD,QAAIU,KAAmB,KACtBR,EAAQF,IAAcK,EAAK,UAAU,GAAGK,IAAkB,CAAC,IAAI,GAAG,GAClEV,IAAcK,EAAK,UAAUK,IAAkB,CAAC,IAAI,OAEpDN,EAASC,CAAI;AAAA,MACd;AAEA,QAAAD,EAASC,CAAI;AAAA,IAEf;AAAA,EAAA,IAGGL,EAAY,SAAS,KACxBE,EAAQF,CAAW;AAGd,QAAAW,IAAe,CAAC,IAAI,IAAI,OAAOV,IAAe,CAAC,CAAC,GAAG;AAEzD,WAASO,IAAI,GAAGA,IAAIT,EAAM,QAAQS,KAAK;AAClC,QAAAL,IAAOJ,EAAMS,CAAC;AACZ,UAAAI,IAAgBX,IAAeE,EAAK;AAE1C,IAAIS,IAAgB,MACXT,KAAA,IAAI,OAAOS,CAAa,IAE7Bb,EAAM,SAAS,IACdS,MAAM,IACTL,IAAO,KAAKA,CAAI,QACNK,MAAMT,EAAM,SAAS,IAC/BI,IAAO,MAAMA,CAAI,OAEjBA,IAAO,KAAKA,CAAI,OAGjBA,IAAO,KAAKA,CAAI,MAGjBQ,EAAa,KAAKR,CAAI;AAAA,EACvB;AAEA,SAAAQ,EAAa,KAAK,IAAI,IAAI,OAAOV,IAAe,CAAC,CAAC,GAAG,GAE9CU,EAAa,KAAK;AAAA,CAAI,IAAInB;AAClC,CAAC;"}