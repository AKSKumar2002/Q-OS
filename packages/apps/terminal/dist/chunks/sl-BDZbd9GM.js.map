{"version":3,"file":"sl-BDZbd9GM.js","sources":["../../src/core/commands/sl.ts"],"sourcesContent":["import { formatError } from \"../_utils/terminal.utils\";\nimport { Command, ExecuteParams } from \"../command\";\nimport { Stream } from \"../stream\";\n\nconst ANIMATION_SPEED = 1.25;\n\nconst LOCOMOTIVE_SMOKE = [\n\t[\n\t\t\"                        (@@) (  ) (@)  ( )  @@   ()   @   o   @   o\",\n\t\t\"                   (   )\",\n\t\t\"               (@@@@)\",\n\t\t\"            (    )\",\n\t\t\"\",\n\t\t\"          (@@@)\",\n\t],\n\t[\n\t\t\"                        (  ) (@@) ( )  (@)  ()    @@    o    @    o   @\",\n\t\t\"                   (@@@)\",\n\t\t\"               (    )\",\n\t\t\"            (@@@@)\",\n\t\t\"\",\n\t\t\"          (   )\",\n\t],\n];\n\nconst LOCOMOTIVE_TOP = [\n\t\"      ====        ________                ___________\",\n\t\"  _D _|  |_______/        \\\\__I_I_____===__|_________|\",\n\t\"   |(_)---  |   H\\\\________/ |   |        =|___ ___|  \",\n\t\"   /     |  |   H  |  |     |   |         ||_| |_||  \",\n\t\"  |      |  |   H  |__--------------------| [___] |  \",\n\t\"  | ________|___H__/__|_____/[][]~\\\\_______|       |  \",\n\t\"  |/ |   |-----------I_____I [][] []  D   |=======|__\",\n];\n\nconst LOCOMOTIVE_BOTTOM = [\n\t[\n\t\t\"__/ =| o |=-~~\\\\  /~~\\\\  /~~\\\\  /~~\\\\ ____Y___________|__\",\n\t\t\" |/-=|___|=    ||    ||    ||    |_____/~\\\\___/       \",\n\t\t\"  \\\\_/      \\\\O=====O=====O=====O_/      \\\\_/           \",\n\t],\n\t[\n\t\t\"__/ =| o |=-~~\\\\  /~~\\\\  /~~\\\\  /~~\\\\ ____Y___________|__\",\n\t\t\" |/-=|___|=O=====O=====O=====O   |_____/~\\\\___/       \",\n\t\t\"  \\\\_/      \\\\__/  \\\\__/  \\\\__/  \\\\__/      \\\\_/           \",\n\t],\n\t[\n\t\t\"__/ =| o |=-O=====O=====O=====O \\\\ ____Y___________|__\",\n\t\t\" |/-=|___|=    ||    ||    ||    |_____/~\\\\___/       \",\n\t\t\"  \\\\_/      \\\\__/  \\\\__/  \\\\__/  \\\\__/      \\\\_/           \",\n\t],\n\t[\n\t\t\"__/ =| o |=-~O=====O=====O=====O\\\\ ____Y___________|__\",\n\t\t\" |/-=|___|=    ||    ||    ||    |_____/~\\\\___/       \",\n\t\t\"  \\\\_/      \\\\__/  \\\\__/  \\\\__/  \\\\__/      \\\\_/           \",\n\t],\n\t[\n\t\t\"__/ =| o |=-~~\\\\  /~~\\\\  /~~\\\\  /~~\\\\ ____Y___________|__\",\n\t\t\" |/-=|___|=   O=====O=====O=====O|_____/~\\\\___/       \",\n\t\t\"  \\\\_/      \\\\__/  \\\\__/  \\\\__/  \\\\__/      \\\\_/           \",\n\t],\n\t[\n\t\t\"__/ =| o |=-~~\\\\  /~~\\\\  /~~\\\\  /~~\\\\ ____Y___________|__\",\n\t\t\" |/-=|___|=    ||    ||    ||    |_____/~\\\\___/       \",\n\t\t\"  \\\\_/      \\\\_O=====O=====O=====O/      \\\\_/           \",\n\t],\n].reverse();\n\nconst COAL_WAGON = [\n\t\"                             \",\n\t\"    _________________        \",\n\t\"   _|                \\\\_____A \",\n\t\" =|                        | \",\n\t\" -|                        | \",\n\t\"__|________________________|_\",\n\t\"|__________________________|_\",\n\t\"   |_D__D__D_|  |_D__D__D_|  \",\n\t\"    \\\\_/   \\\\_/    \\\\_/   \\\\_/   \",\n];\n\nconst EXTRA_WAGONS = [\n\t[\n\t\t\" _______================_______ \",\n\t\t\"  |  | ___  ___  ___  ___ |  |  \",\n\t\t\"  |  | | |  | |  | |  | | |  |  \",\n\t\t\"  |  | |_|  |_|  |_|  |_| |  |  \",\n\t\t\"  |  |                    |  |  \",\n\t\t\"__|__|____________________|__|__\",\n\t\t\"_|____________________________|_\",\n\t\t\"   |_D__D__D_|     |_D__D__D_|  \",\n\t\t\"    \\\\_/   \\\\_/       \\\\_/   \\\\_/   \",\n\t],\n\t[\n\t\t\"                             \",\n\t\t\"  ________========__HH____   \",\n\t\t\" /                  HH    \\\\  \",\n\t\t\"/                   HH     \\\\ \",\n\t\t\"\\\\                   HH     / \",\n\t\t\"_\\\\__________________HH____/__\",\n\t\t\"|__________________________|_\",\n\t\t\"   |_D__D__D_|  |_D__D__D_|  \",\n\t\t\"    \\\\_/   \\\\_/    \\\\_/   \\\\_/   \",\n\t],\n\t[\n\t\t\"                             \",\n\t\t\"                             \",\n\t\t\"                             \",\n\t\t\"                             \",\n\t\t\"                             \",\n\t\t\"_____________________________\",\n\t\t\"|__________________________|_\",\n\t\t\"   |_D__D__D_|  |_D__D__D_|  \",\n\t\t\"    \\\\_/   \\\\_/    \\\\_/   \\\\_/   \",\n\t],\n\t[\n\t\t\"                             \",\n\t\t\"    _|__|___________|__|___  \",\n\t\t\"   (_|__|___________|__|___) \",\n\t\t\"   _(|__|___________|__|__)_ \",\n\t\t\"  (__|__|___________|__|____)\",\n\t\t\"_(___|__|___________|__|__)__\",\n\t\t\"|__________________________|_\",\n\t\t\"   |_D__D__D_|  |_D__D__D_|  \",\n\t\t\"    \\\\_/   \\\\_/    \\\\_/   \\\\_/   \",\n\t],\n\t[\n\t\t\"                             \",\n\t\t\" ___________________________ \",\n\t\t\" \\\\      |           |      / \",\n\t\t\"  \\\\     |           |     /  \",\n\t\t\"  |\\\\    |           |    /|  \",\n\t\t\"__|_\\\\___|___________|___/_|__\",\n\t\t\"|__________________________|_\",\n\t\t\"   |_D__D__D_|  |_D__D__D_|  \",\n\t\t\"    \\\\_/   \\\\_/    \\\\_/   \\\\_/   \",\n\t],\n];\n\nfunction generateLocomotive(frame: number, wagonCount = 1) {\n\tconst smokeHeight = LOCOMOTIVE_SMOKE[0].length;\n\tconst locomotiveHeight = LOCOMOTIVE_TOP.length + LOCOMOTIVE_BOTTOM[0].length;\n\tconst wagonHeight = COAL_WAGON.length;\n\n\tconst wagonStart = smokeHeight + locomotiveHeight - wagonHeight;\n\n\tconst smoke = LOCOMOTIVE_SMOKE[Math.round(frame / 4) % LOCOMOTIVE_SMOKE.length];\n\tconst top = LOCOMOTIVE_TOP;\n\tconst bottom = LOCOMOTIVE_BOTTOM[frame % LOCOMOTIVE_BOTTOM.length];\n\n\tconst distance = 50 - frame;\n\tconst locomotive = smoke.concat(top, bottom).map((line, index) => {\n\t\tif (index >= wagonStart && wagonCount > 0) {\n\t\t\tfor (let i = 0; i < wagonCount; i++) {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tline += COAL_WAGON[index - wagonStart];\n\t\t\t\t} else {\n\t\t\t\t\tline += EXTRA_WAGONS[(i - 1) % EXTRA_WAGONS.length][index - wagonStart];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (distance === 0) {\n\t\t\treturn line;\n\t\t} else if (distance > 0) {\n\t\t\treturn \" \".repeat(distance) + line;\n\t\t} else {\n\t\t\tline = line.slice(-distance);\n\t\t\treturn line;\n\t\t}\n\t}).join(\"\\n\");\n\n\treturn `\\n${locomotive}\\n`;\n}\n\nexport const sl = new Command()\n\t.setManual({\n\t\tpurpose: \"Show animations aimed to correct users who accidentally enter sl instead of ls. SL stands for Steam Locomotive.\",\n\t\tusage: \"sl\\n\"\n\t\t\t+ \"sl -w number\",\n\t\toptions: {\n\t\t\t\"-w number\": \"Set the amount of wagons (defaults to 1)\",\n\t\t},\n\t})\n\t.addOption({\n\t\tshort: \"w\",\n\t\tlong: \"wagons\",\n\t\tisInput: true,\n\t})\n\t.setExecute(function(this: Command, _args, params) {\n\t\tconst { inputs } = params as ExecuteParams;\n\t\tlet wagonCount = 1;\n\n\t\tif (inputs?.w) {\n\t\t\twagonCount = parseInt(inputs.w);\n\n\t\t\tif (!wagonCount || wagonCount < 0) {\n\t\t\t\treturn formatError(this.name, \"Please specify a valid amount of wagons\"); \n\t\t\t}\n\t\t}\n\n\t\tconst stream = new Stream();\n\n\t\tlet frame = 0;\n\t\tconst interval = setInterval(() => {\n\t\t\tconst text = generateLocomotive(frame, wagonCount);\n\t\t\tstream.send(text);\n\t\t\tframe++;\n\n\t\t\tif (text.trim().length === 0)\n\t\t\t\tstream.stop();\n\t\t}, 100 / ANIMATION_SPEED);\n\n\t\tstream.on(Stream.EVENT_NAMES.stop, () => {\n\t\t\tclearInterval(interval);\n\t\t});\n\n\t\tstream.start();\n\n\t\treturn stream;\n\t});"],"names":["ANIMATION_SPEED","LOCOMOTIVE_SMOKE","LOCOMOTIVE_TOP","LOCOMOTIVE_BOTTOM","COAL_WAGON","EXTRA_WAGONS","generateLocomotive","frame","wagonCount","smokeHeight","locomotiveHeight","wagonHeight","wagonStart","smoke","top","bottom","distance","line","index","i","sl","Command","_args","params","inputs","formatError","stream","Stream","interval","text"],"mappings":";;AAIA,MAAMA,IAAkB,MAElBC,IAAmB;AAAA,EACxB;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD,GAEMC,IAAiB;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD,GAEMC,IAAoB;AAAA,EACzB;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD,EAAE,QAAQ,GAEJC,IAAa;AAAA,EAClB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD,GAEMC,IAAe;AAAA,EACpB;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AAAA,EACA;AAAA,IACC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD;AAEA,SAASC,EAAmBC,GAAeC,IAAa,GAAG;AACpD,QAAAC,IAAcR,EAAiB,CAAC,EAAE,QAClCS,IAAmBR,EAAe,SAASC,EAAkB,CAAC,EAAE,QAChEQ,IAAcP,EAAW,QAEzBQ,IAAaH,IAAcC,IAAmBC,GAE9CE,IAAQZ,EAAiB,KAAK,MAAMM,IAAQ,CAAC,IAAIN,EAAiB,MAAM,GACxEa,IAAMZ,GACNa,IAASZ,EAAkBI,IAAQJ,EAAkB,MAAM,GAE3Da,IAAW,KAAKT;AAsBf,SAAA;AAAA,EArBYM,EAAM,OAAOC,GAAKC,CAAM,EAAE,IAAI,CAACE,GAAMC,MAAU;AAC7D,QAAAA,KAASN,KAAcJ,IAAa;AACvC,eAASW,IAAI,GAAGA,IAAIX,GAAYW;AAC/B,QAAIA,MAAM,IACDF,KAAAb,EAAWc,IAAQN,CAAU,IAErCK,KAAQZ,GAAcc,IAAI,KAAKd,EAAa,MAAM,EAAEa,IAAQN,CAAU;AAKzE,WAAII,MAAa,IACTC,IACGD,IAAW,IACd,IAAI,OAAOA,CAAQ,IAAIC,KAEvBA,IAAAA,EAAK,MAAM,CAACD,CAAQ,GACpBC;AAAA,EACR,CACA,EAAE,KAAK;AAAA,CAAI,CAEU;AAAA;AACvB;AAEO,MAAMG,IAAK,IAAIC,EAAQ,EAC5B,UAAU;AAAA,EACV,SAAS;AAAA,EACT,OAAO;AAAA;AAAA,EAEP,SAAS;AAAA,IACR,aAAa;AAAA,EACd;AACD,CAAC,EACA,UAAU;AAAA,EACV,OAAO;AAAA,EACP,MAAM;AAAA,EACN,SAAS;AACV,CAAC,EACA,WAAW,SAAwBC,GAAOC,GAAQ;AAC5C,QAAA,EAAE,QAAAC,EAAW,IAAAD;AACnB,MAAIf,IAAa;AAEjB,MAAIgB,KAAA,QAAAA,EAAQ,MACEhB,IAAA,SAASgB,EAAO,CAAC,GAE1B,CAAChB,KAAcA,IAAa;AACxB,WAAAiB,EAAY,KAAK,MAAM,yCAAyC;AAInE,QAAAC,IAAS,IAAIC;AAEnB,MAAIpB,IAAQ;AACN,QAAAqB,IAAW,YAAY,MAAM;AAC5B,UAAAC,IAAOvB,EAAmBC,GAAOC,CAAU;AACjD,IAAAkB,EAAO,KAAKG,CAAI,GAChBtB,KAEIsB,EAAK,OAAO,WAAW,KAC1BH,EAAO,KAAK;AAAA,EAAA,GACX,MAAM1B,CAAe;AAExB,SAAA0B,EAAO,GAAGC,EAAO,YAAY,MAAM,MAAM;AACxC,kBAAcC,CAAQ;AAAA,EAAA,CACtB,GAEDF,EAAO,MAAM,GAENA;AACR,CAAC;"}