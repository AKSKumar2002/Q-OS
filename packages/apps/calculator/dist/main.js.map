{"version":3,"file":"main.js","sources":["../src/components/Calculator.tsx","../src/main.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport styles from \"./Calculator.module.css\";\nimport { Button, WindowProps } from \"@prozilla-os/core\";\n\nexport function Calculator({ active }: WindowProps) {\n\tconst [input, setInput] = useState<string | null>(\"0\");\n\tconst [firstNumber, setFirstNumber] = useState<number | null>(null);\n\tconst [secondNumber, setSecondNumber] = useState<number | null>(null);\n\tconst [operation, setOperation] = useState<string | null>(null);\n\tconst [isIntermediate, setIsIntermediate] = useState(false);\n\n\tconst reset = useCallback(() => {\n\t\tsetInput(\"0\");\n\t\tsetFirstNumber(null);\n\t\tsetSecondNumber(null);\n\t\tsetOperation(null);\n\t}, []);\n\n\tconst addInput = useCallback((string: string) => {\n\t\tlet hasReset = false;\n\t\tif (secondNumber != null) {\n\t\t\tif (isIntermediate && input != null) {\n\t\t\t\tsetFirstNumber(parseFloat(input));\n\t\t\t\tsetSecondNumber(null);\n\t\t\t\tsetInput(null);\n\t\t\t} else {\n\t\t\t\treset();\n\t\t\t}\n\t\t\thasReset = true;\n\t\t}\t\t\t\n\n\t\tif (string === \".\" && input?.includes(\".\"))\n\t\t\treturn;\n\n\t\tif (string === \"-\") {\n\t\t\tif (input === \"0\") {\n\t\t\t\tsetInput(\"-0\");\n\t\t\t} else if (input != null) {\n\t\t\t\tsetInput((parseFloat(input) * -1).toString());\n\t\t\t}\n\t\t} else if (string === \"%\" && input != null) {\n\t\t\tsetInput((parseFloat(input) / 100).toString());\n\t\t} else if (input === \"0\" || input === \"-0\" || input == null || hasReset) {\n\t\t\tif (string === \".\") {\n\t\t\t\tsetInput(input === \"-0\" ? \"0.\" : \"0.\");\n\t\t\t} else {\n\t\t\t\tsetInput(input === \"-0\" ? `-${string}` : string);\n\t\t\t}\n\t\t} else {\n\t\t\tsetInput(input + string);\n\t\t}\n\n\t}, [input, isIntermediate, reset, secondNumber]);\n\n\tconst calculate = useCallback((intermediate = false) => {\n\t\tif (firstNumber != null && input != null) {\n\t\t\tsetSecondNumber(parseFloat(input));\n\n\t\t\tconst a = firstNumber;\n\t\t\tconst b = parseFloat(input);\n\t\t\t\n\t\t\tlet result = 0;\n\t\t\tswitch (operation) {\n\t\t\t\tcase \"×\":\n\t\t\t\t\tresult = a * b;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"÷\":\n\t\t\t\t\tresult = a / b;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"+\":\n\t\t\t\t\tresult = a + b;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"-\":\n\t\t\t\t\tresult = a - b;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tsetInput(result.toString());\n\t\t}\n\n\t\tsetIsIntermediate(intermediate);\n\t}, [firstNumber, input, operation]);\n\n\tconst changeOperation = useCallback((operation: string) => {\n\t\tif (firstNumber != null && secondNumber == null) {\n\t\t\tcalculate(true);\n\t\t} else if (input != null) {\n\t\t\tsetFirstNumber(parseFloat(input));\n\t\t\tsetSecondNumber(null);\n\t\t\tsetInput(null);\n\t\t}\n\n\t\tsetOperation(operation);\n\t}, [calculate, firstNumber, input, secondNumber]);\n\n\tuseEffect(() => {\n\t\tconst onKeyDown = (event: KeyboardEvent) => {\n\t\t\tif (!active)\n\t\t\t\treturn;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tswitch (event.key) {\n\t\t\t\tcase \"0\":\n\t\t\t\tcase \"1\":\n\t\t\t\tcase \"2\":\n\t\t\t\tcase \"3\":\n\t\t\t\tcase \"4\":\n\t\t\t\tcase \"5\":\n\t\t\t\tcase \"6\":\n\t\t\t\tcase \"7\":\n\t\t\t\tcase \"8\":\n\t\t\t\tcase \"9\":\n\t\t\t\t\taddInput(event.key);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \".\":\n\t\t\t\tcase \",\":\n\t\t\t\t\taddInput(\".\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Escape\":\n\t\t\t\t\treset();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"=\":\n\t\t\t\tcase \"Enter\":\n\t\t\t\t\tcalculate();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"*\":\n\t\t\t\t\tchangeOperation(\"×\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"/\":\n\t\t\t\t\tchangeOperation(\"÷\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"+\":\n\t\t\t\tcase \"-\":\n\t\t\t\t\tchangeOperation(event.key);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%\":\n\t\t\t\t\taddInput(\"%\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"Backspace\":\n\t\t\t\t\tif (input != null && input.length > 0) {\n\t\t\t\t\t\tsetInput(input.slice(0, -1));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener(\"keydown\", onKeyDown);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"keydown\", onKeyDown);\n\t\t};\n\t}, [active, addInput, calculate, changeOperation, reset]);\n\n\tlet calculation = \"\";\n\tif (operation != null)\n\t\tcalculation = `${firstNumber} ${operation} ${secondNumber != null ? secondNumber + \" =\" : \"\"}`;\n\n\treturn (<div className={styles.Calculator}>\n\t\t<div className={styles.Output}>\n\t\t\t<p className={styles.Calculation}>{calculation}</p>\n\t\t\t<p className={styles.Preview}>{input ?? firstNumber}</p>\n\t\t</div>\n\t\t<div className={styles.Input}>\n\t\t\t<div className={styles.InputRow}>\n\t\t\t\t<Button className={styles.Button} onClick={reset}>C</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"-\"); }}>+/-</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"%\"); }}>%</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { changeOperation(\"÷\"); }}>÷</Button>\n\t\t\t</div>\n\t\t\t<div className={styles.InputRow}>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"7\"); }}>7</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"8\"); }}>8</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"9\"); }}>9</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { changeOperation(\"×\"); }}>×</Button>\n\t\t\t</div>\n\t\t\t<div className={styles.InputRow}>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"4\"); }}>4</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"5\"); }}>5</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"6\"); }}>6</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { changeOperation(\"-\"); }}>-</Button>\n\t\t\t</div>\n\t\t\t<div className={styles.InputRow}>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"1\"); }}>1</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"2\"); }}>2</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\"3\"); }}>3</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { changeOperation(\"+\"); }}>+</Button>\n\t\t\t</div>\n\t\t\t<div className={styles.InputRow}>\n\t\t\t\t<Button className={`${styles.Button} ${styles.ButtonLarge}`} onClick={() => { addInput(\"0\"); }}>0</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { addInput(\".\"); }}>.</Button>\n\t\t\t\t<Button className={styles.Button} onClick={() => { calculate(); }}>=</Button>\n\t\t\t</div>\n\t\t</div>\n\t</div>);\n}","import { App, Vector2 } from \"@prozilla-os/core\";\nimport { Calculator } from \"./components/Calculator\";\n\nconst calculator = new App(\"Calculator\", \"calculator\", Calculator, { size: new Vector2(400, 600) })\n\t.setIconUrl(\"https://os.prozilla.dev/assets/apps/icons/calculator.svg\")\n\t.setPinnedByDefault(false)\n\t.setCategory(\"Utilities & tools\");\ncalculator.setMetadata({ name: \"@prozilla-os/calculator\", version: \"1.1.17\", author: \"Prozilla\" });\n\n\nexport { calculator };"],"names":["Calculator","active","input","setInput","useState","firstNumber","setFirstNumber","secondNumber","setSecondNumber","operation","setOperation","isIntermediate","setIsIntermediate","reset","useCallback","addInput","string","hasReset","calculate","intermediate","a","b","result","changeOperation","useEffect","onKeyDown","event","calculation","jsxs","styles","jsx","Button","calculator","App","Vector2"],"mappings":"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"}